# i3status GPU nvidia

Скрипт для вывода температуры и загруженности GPU nvidia (проприетарные драйвера) протестированно на GeForce GTX 1650.

![изображение](https://user-images.githubusercontent.com/132225093/235370921-fd7b70c2-5e23-4ef5-a133-4fd7b564f9e7.png)

Краткое описание:

Так как sensors температуру видеокарты не выводит, а для i3status штатного решения нет, решил я сделать свой скрипт, в общем, отталкивался я от команды 
nvidia-smi -q -d TEMPERATURE -f ~/.config/i3status/gpu_t/GPU и nvidia-smi -q -d UTILIZATION -f ~/.config/i3status/gpu_t/GPU1, первая выводит температуру, вторая загруженность видеокарты, ключ -f организует запись в файл. Выводит оно, естественно, не самым корректным образом:
![изображение](https://user-images.githubusercontent.com/132225093/235371463-31a277ae-bc6e-4282-83be-fff76c6e1770.png)

ну и UTILIZATION аналогично. Выход я нашел (не знаю правда на сколько эффективный), написал две простые програмки на СИ посредством которых я умудрился 
вытащить только нужные цифры и записать их в отдельный файл. Файл script.sh выглядит следуйщим образом: 

![изображение](https://user-images.githubusercontent.com/132225093/235371716-84d83f92-4385-4494-a56c-9358acdbc197.png)

где первые две строки это то что я описал выше, за ними запускаются программы GPU.out и GPU_util.out которые сохраняют необходимую нам строку в отдельные файлы.
Пример GPU.out:

![изображение](https://user-images.githubusercontent.com/132225093/235371958-a04c52c4-abc4-46fa-8329-2fcd6c42364e.png)

Файл temp содержит вывод GPU.out, util GPU_util.out (температура и загруженность соответственно). 

Далее добавил все это в config i3status 

![изображение](https://user-images.githubusercontent.com/132225093/235372234-5e4446f7-3cd3-4bc9-8a14-b929d7d2753b.png)

ну и order += "read_file temp" , order += "volume master" соответсвенно.

Дальше стал вопрос как это автоматически запускать и с определенной частотой, например 2 секунды? Сделал следуйщие, создал еще один sh файл auto.sh где прописал : watch -n 2 sh ~/.config/i3status/gpu_t/script.sh, 

wath -n 2 обеспечивает запуск скрипта через каждые n-секунд (в нашем случае 2 секунды), и добавил это дело в конфиг i3 для автозапуска при включении ПК: 

exec --no-startup-id ~/.config/i3status/gpu_t/auto.sh. 

Все, после перезагрузки скрипт работает. Единственный наверно минус (хотя я думаю не существенный) это постоянная запись на диск, 4-8 КиБ/с, (firefox пишет в разы больше, поэтому можно забить) 

P.S. ОБЯЗАТЕЛЬНО ИЗМЕНИТЕ ПУТИ К ФАЙЛАМ НА СВОИ, И СКОМПИЛИРУЙТЕ GPU_temp.c и GPU_util.c, со своими путями к файлам.

![изображение](https://user-images.githubusercontent.com/132225093/235372553-84bcdab3-5644-4ce0-85f1-9a60947be082.png)

Знаю есть другие решения, которые проще чем это. Но я придумал так ))
